# Обзор конфигурации:

## Формат MiniMessage

Все цвета и форматирование текста в этой конфигурации используют **формат MiniMessage**. Это современная, гибкая система форматирования текста, которая заменяет устаревшие коды цветов.

### Общие цвета

Именованные цвета — самый простой способ добавить цвет:
- `<red>` - Красный текст
- `<green>` - Зелёный текст
- `<blue>` - Синий текст
- `<yellow>` - Жёлтый текст
- `<aqua>` - Бирюзовый/Голубой текст
- `<gray>` - Серый текст
- `<white>` - Белый текст
- `<black>` - Чёрный текст
- `<dark_red>` - Тёмно-красный
- `<dark_green>` - Тёмно-зелёный
- `<dark_blue>` - Тёмно-синий
- `<dark_gray>` - Тёмно-серый
- `<dark_aqua>` - Тёмно-бирюзовый
- `<gold>` - Золотой/Оранжевый

### RGB Цвета

Для точного контроля цвета используйте RGB-цвета в формате hex:
- `<color:#FF0000>` - Красный (RGB формат: #RRGGBB)
- `<color:#00FF00>` - Зелёный
- `<color:#0000FF>` - Синий
- `<color:#FF6B35>` - Пользовательский оранжевый
- `<color:#A0E7E5>` - Пользовательский бирюзовый

### Форматирование текста

Сочетайте цвета с форматированием:
- `<b>` - Жирный текст
- `<i>` - Курсивный текст
- `<u>` - Подчёркнутый текст
- `<st>` - Перечёркнутый текст
- `<obf>` - Обфусцированный (искажённый) текст
- `<reset>` - Сброс форматирования

### Примеры

```
<red>Ошибка:</red> <gray>Что-то пошло не так</gray>
<green><b>Успех!</b></green> Ваш кит сохранён.
<color:#FF6B35><b>Важно:</b></color> Это пользовательский оранжевый цвет.
<aqua>Введите <u>/kit</u> чтобы начать!</aqua>
```

Полный справочник всех доступных опций см. в [документации MiniMessage](https://docs.papermc.io/adventure/minimessage/).

---

### **Учетные данные базы данных**

Выберите тип хранилища. SQLite рекомендуется для небольших серверов, а MySQL — для более крупных серверов или мульти-серверных установок.

```yaml
# Настоятельно рекомендуется использовать MySQL или SQLite
# YAML не должен использоваться ни в каком окружении


storage: #sqlite, mysql, redis, yml (yaml)
  type: "sqlite"

mysql:
  host: "localhost"
  port: "3306"
  dbname: "kitdatabase"
  username: "username"
  password: "pa55w0rd"

redis:
  host: "localhost"
  port: 6379
  password: "pa55w0rd"
```

---

### **Сообщение дня (MOTD)**

MOTD отображает сообщение пользователям при входе на сервер. Этот раздел использует формат mini message для стилизации и форматирования сообщения.

```yaml
motd:
  enabled: true # Включить или отключить функцию MOTD.
  delay: 5 # Задержка в секундах перед отображением MOTD после входа игрока.
  message: # Содержание сообщения в формате mini message.
    - "" # Пустая строка для отступа.
    - "<gray>   <st>                </st> <aqua><b>Per Player Kits</b><gray> <st>                </st>"
    - "" # Дополнительный отступ.
    - "         <white>Введите <aqua>/kit<white>, <aqua>/k <white>или <aqua>/pk<white> чтобы начать!"
    - ""
    - "<gray>   <st>                                                         "
    - ""
```

---

### **Периодические трансляции**

Транслирует сообщения периодически всем игрокам с заданным интервалом времени. Этот раздел использует формат mini message для стилизации и форматирования сообщения.

```yaml
scheduled-broadcast:
  enabled: true # Включить или отключить периодические трансляции.
  period: 90 # Интервал между трансляциями в секундах.
  messages: # Список сообщений для трансляции в формате mini message.
    - "Пример сообщения"
```

---

### **Комната китов**

Определяет киты и их визуальное представление в интерфейсе. Имена китов отображаются в их цвете по умолчанию.

```yaml
kitroom:
  items:
    1:
      name: "OG Vanilla" # Имя кита.
      material: "DIAMOND_SWORD" # Иконка, представляющая кит.
    2:
      name: "Тренировка"
      material: "WOODEN_SWORD"
    3:
      name: "Зелья"
      material: "SPLASH_POTION"
    4:
      name: "Арсенал"
      material: "NETHERITE_SWORD"
    5:
      name: "Топор и UHC"
      material: "SHIELD"
```

---

### **Миры с отключенными командами**

Список миров, где команды китов отключены. Игроки в этих мирах увидят пользовательское сообщение об ошибке, если попытаются использовать команды. Этот раздел использует формат mini message для стилизации.

```yaml
disabled-command-worlds:
  - "example_world" # Добавьте миры, где команды китов должны быть ограничены.

disabled-command-message: "<red>Здесь киты отключены!</red>" # Сообщение, отображаемое игрокам в отключенных мирах (формат MiniMessage).
```

---

### **Публичные киты**

Позволяет настраивать общедоступные киты. По умолчанию этот раздел закомментирован и должен быть настроен в зависимости от требований. Имена китов отображаются в их цвете по умолчанию.

```yaml
publickits:
  # 1:
  #   name: "Кит 1" # Имя кита.
  #   icon: "DIAMOND_SWORD" # Иконка для кита.
```


### **Сообщения**

Этот раздел управляет сообщениями, которые транслируются игрокам при выполнении различных действий, связанных с китами. Сообщения используют формат mini message для стилизации. Каждый тип сообщения можно включить/отключить и настроить с помощью пользовательского узла разрешений.

```yaml
messages:
  disable-kit-messages: false # Установите в true, чтобы отключить все сообщения о действиях с китами (например, игрок загрузил кит, игрок починил снаряжение и т.д.).
  player-repaired:
    enabled: true # Включить или отключить этот конкретный тип сообщения
    message: "<gray>%player% починил своё снаряжение</gray>" # Содержание сообщения в формате mini message
    permission: "perplayerkit.kitnotify" # Разрешение, необходимое для просмотра этого сообщения (по умолчанию разрешение по умолчанию равно true)
  player-healed:
    enabled: true
    message: "<gray>%player% вылечил себя</gray>"
    permission: "perplayerkit.kitnotify"
  player-opened-kit-room:
    enabled: true
    message: "<gray>%player% открыл комнату китов</gray>"
    permission: "perplayerkit.kitnotify"
  player-loaded-private-kit:
    enabled: true
    message: "<gray>%player% загрузил кит</gray>"
    permission: "perplayerkit.kitnotify"
  player-loaded-public-kit:
    enabled: true
    message: "<gray>%player% загрузил публичный кит</gray>"
    permission: "perplayerkit.kitnotify"
  player-loaded-enderchest:
    enabled: true
    message: "<gray>%player% загрузил эндер-сундук.</gray>"
    permission: "perplayerkit.kitnotify"
  player-copied-kit:
    enabled: true
    message: "<gray>%player% скопировал кит</gray>"
    permission: "perplayerkit.kitnotify"
  player-copied-ec:
    enabled: true
    message: "<gray>%player% скопировал эндер-сундук</gray>"
    permission: "perplayerkit.kitnotify"
  player-regeared:
    enabled: true
    message: "<gray>%player% пополнил снаряжение</gray>"
    permission: "perplayerkit.kitnotify"
```

#### Поля конфигурации сообщений:

- **enabled**: Установите в `false`, чтобы отключить определённый тип сообщения. Если отключено, сообщение не будет транслироваться никому.
- **message**: Содержание сообщения в формате mini message. Поддерживает плейсхолдер `%player%`, который заменяется именем игрока (или отображаемым именем, если включено `use-display-name`).
- **permission**: Узел разрешений, необходимый игрокам для просмотра этого сообщения. Игроки без этого разрешения не увидят трансляцию. По умолчанию `perplayerkit.kitnotify`, которое по умолчанию равно `true`.

#### Глобальные настройки:

- **disable-kit-messages**: Установите в `true`, чтобы полностью отключить все сообщения о действиях с китами. Если включено, игроки не будут видеть никаких трансляций о действиях, связанных с китами, независимо от флага функции broadcast-on-player-action или индивидуальных разрешений на сообщения. Это действует как глобальный переключатель вкл/выкл.

---

### **Звуки**

Этот раздел позволяет включать, отключать и настраивать звуки, воспроизводимые плагином.

```yaml
sounds:
  enabled: true # Установите в false, чтобы отключить все звуки плагина.
  # Звук, воспроизводимый при успешных действиях (например, сохранение кита)
  success: ENTITY_PLAYER_LEVELUP
  # Звук, воспроизводимый при неудачных действиях (например, попытка использовать отключенную команду)
  failure: ENTITY_ITEM_BREAK
  # Звук, воспроизводимый при нажатии кнопки в GUI
  click: UI_BUTTON_CLICK
  # Звук, воспроизводимый при открытии GUI
  open_gui: UI_BUTTON_CLICK
  # Звук, воспроизводимый при закрытии GUI
  close_gui: UI_BUTTON_CLICK
```


### **Анти-эксплойт**

Этот раздел позволяет включать или отключать функции защиты от эксплойтов, часто применимые к этому плагину.

```yaml
anti-exploit:
  only-allow-kitroom-items: false #требует, чтобы предметы были в комнате китов, прежде чем их можно было использовать в ките.
  import-filter: false #требует, чтобы only-allow-kitroom-items был true. предотвращает дублирование предметов, которых нет в комнате китов, с помощью кнопки импорта кита.
  block-spaces-in-commands: false #предотвращает обход фильтров команд.
  prevent-shulkers-dropping-items: false #предотвращает выпадение предметов из шалкеров при разрушении. Функция анти-лаг.
```

### **Команда пополнения снаряжения (Regear)**

Позволяет настраивать команды пополнения снаряжения, используемые на некоторых серверах в различных форматах соревнований. Команды `/rg` и `/regear` можно настроить независимо для использования разных режимов.

```yaml
regear:
  rg-mode: "command" #ОПЦИИ: command, shulker - Поведение для команды /rg
  regear-mode: "command" #ОПЦИИ: command, shulker - Поведение для команды /regear
  command-cooldown: 5 #перезарядка команды в секундах. рекомендуется устанавливать низкое значение или 0, если используется режим шалкера.
  damage-timer: 5 #время в секундах ожидания после получения урона, прежде чем игроки смогут пополнить снаряжение
  allow-while-using-elytra: true #установите false, чтобы заблокировать команду пополнения снаряжения во время использования элитр
  #
  # Позволить пополнять всё снаряжение, установив:
  # invert-whitelist: true
  # whitelist: []
  #
  #
  invert-whitelist: false #установка этого значения в true делает белый список чёрным
  whitelist:
    - ENDER_PEARL
    - END_CRYSTAL
    - OBSIDIAN
    - GLOWSTONE
    - RESPAWN_ANCHOR
```

#### Опции режима пополнения:

- **command**: Напрямую пополняет предметы из загруженного кита игрока (пополняются только предметы из белого списка)
- **shulker**: Даёт игроку физический шалкер пополнения снаряжения, который он может поставить и использовать

#### Примеры конфигураций:

**Обе команды используют одинаковый режим:**
```yaml
regear:
  rg-mode: "command"
  regear-mode: "command"
```

**Разные режимы для разных команд:**
```yaml
regear:
  rg-mode: "shulker"      # /rg даёт шалкер
  regear-mode: "command"  # /regear напрямую пополняет предметы
```



### **Флаги функций**

Ряд функций и настроек плагина. Их можно включить или отключить в зависимости от требований вашего сервера.
```yaml
# Различные флаги функций для плагина
feature:
    set-health-on-kit-load: false
    set-hunger-on-kit-load: false
    set-saturation-on-kit-load: false
    remove-potion-effects-on-kit-load: false

    heal-on-enderchest-load: false
    feed-on-enderchest-load: false
    set-saturation-on-enderchest-load: false
    remove-potion-effects-on-enderchest-load: false

    rekit-on-respawn: true
    rekit-on-kill: false

    broadcast-kit-messages: true #транслирует, когда игрок загружает кит или эндер-сундук

    broadcast-on-player-action: true #транслирует, когда игрок использует кит, копирует кит и т.д.

    send-update-message-on-join: true #отправляет сообщение игрокам с perplayerkit.admin, когда они заходят на сервер, если доступна новая версия

    old-death-drops: false #заставляет игроков сбрасывать предметы в сжатую область, а не распределять при смерти
```

#### Описания флагов функций:

**Функции загрузки кита:**
- **rekit-on-respawn**: Автоматически загружает последний использованный кит игрока, когда он возрождается после смерти
- **rekit-on-kill**: Автоматически загружает последний использованный кит игрока, когда он убивает другого игрока
- **broadcast-kit-messages**: Контролирует, отправляются ли трансляции, когда игроки загружают киты или эндер-сундуки (например, "Игрок загрузил кит"). Когда установлено в `false`, эти конкретные трансляции загрузки кита подавляются

**Функции трансляции действий:**
- **broadcast-on-player-action**: Контролирует, отправляются ли трансляции для других действий игрока, таких как копирование китов, починка снаряжения, открытие комнаты китов и т.д. Это НЕ влияет на трансляции загрузки кита (контролируются `broadcast-kit-messages`)

**Функции Здоровья/Голода:**
- **set-health-on-kit-load**: Устанавливает полное здоровье игрока при загрузке кита
- **set-hunger-on-kit-load**: Устанавливает полный голод игрока при загрузке кита
- **set-saturation-on-kit-load**: Устанавливает полное насыщение игрока при загрузке кита
- **remove-potion-effects-on-kit-load**: Удаляет все эффекты зелий при загрузке кита
- **heal-on-enderchest-load**: Устанавливает полное здоровье игрока при загрузке эндер-сундука
- **feed-on-enderchest-load**: Устанавливает полный голод игрока при загрузке эндер-сундука
- **set-saturation-on-enderchest-load**: Устанавливает полное насыщение игрока при загрузке эндер-сундука
- **remove-potion-effects-on-enderchest-load**: Удаляет все эффекты зелий при загрузке эндер-сундука
